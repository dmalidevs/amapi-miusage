document.addEventListener("click",t=>{(t.target.classList.contains("close")||t.target.classList.contains("notice-dismiss"))&&t.target.parentElement.remove()});const l=async(t,a=null,n="POST")=>{const s=new FormData;s.append("action",t),s.append("nonce",amapi_data.nonce),s.append("data",JSON.stringify(a));const e=await fetch(amapi_data.ajaxurl,{method:n,body:s});if(!e.ok)throw new Error("Network response was not ok");return e.json()};function r(t="success",a="Success",n=1e3){const s=document.getElementById("amapi-toast-wrap"),e=document.getElementById("toast_message");e.innerHTML=`<div class="notice notice-${t} notice-alt is-dismissible"><p>${a}</p><button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>`,e.style.display="block",setInterval(()=>{const o=s.firstElementChild;setTimeout(()=>{o&&o.remove()},n)},n)}const i=document.getElementById("amapi_refresh_button"),d=document.getElementById("amapi-page-content"),c=document.getElementById("ajax_loader");document.addEventListener("DOMContentLoaded",async()=>{d&&i&&i.addEventListener("click",async()=>{m(d)})});function m(t){c.style.display="block",l("amapi_refresh_data",{name:"John Doe"}).then(a=>{a.success&&(t.innerHTML=p(a.data)),r(a.success?"success":"warning",a.data.message),c.style.display="none"})}const p=t=>{let a=`<tr>${t.data.headers.map(s=>`<th>${s}</th>`).join("")}</tr>`,n=Object.keys(t.data.rows).map(s=>{let e=t.data.rows[s];return`<tr><td>${e.id}</td><td>${e.fname}</td><td>${e.lname}</td><td>${e.email}</td><td>${e.date}</td></tr>`}).join("");return`<h3 class="amapi-table-title">${t.title}</h3><table class="wp-list-table widefat fixed striped table-view-list datas amapi-datatable"><thead>${a}</thead><tbody>${n}</tbody></table>`};
