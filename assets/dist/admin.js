document.addEventListener("click",t=>{t.target.classList.contains("close")&&t.target.parentElement.remove()});function c(t="success",a="Success",s=0){const e=document.getElementById("inline_notice");e.innerHTML="",e.insertAdjacentHTML("beforeend",`<div class="amapi-toast amapi-toast-${t}"><span class="close">&times;</span> <span>${a}</span></div>`),s>0&&setTimeout(()=>{e.innerHTML="",ajaxLoader.style.display="none"},s)}const r=async(t,a=null,s="POST")=>{const e=new FormData;e.append("action",t),e.append("nonce",amapi_data.nonce),e.append("data",JSON.stringify(a));const n=await fetch(amapi_data.ajaxurl,{method:s,body:e});if(!n.ok)throw new Error("Network response was not ok");return n.json()},d=document.getElementById("amapi_refresh_button"),o=document.getElementById("amapi-page-content"),i=document.getElementById("ajax_loader");document.addEventListener("DOMContentLoaded",async()=>{o&&d&&d.addEventListener("click",async()=>{l(o)})});function l(t){i.style.display="block",r("amapi_refresh_data",{name:"John Doe"}).then(a=>{a.success&&(t.innerHTML=m(a.data)),c(a.success,a.data.message),i.style.display="none"})}const m=t=>{let a=`<tr>${t.data.headers.map(e=>`<th>${e}</th>`).join("")}</tr>`,s=Object.keys(t.data.rows).map(e=>{let n=t.data.rows[e];return`<tr><td>${n.id}</td><td>${n.fname}</td><td>${n.lname}</td><td>${n.email}</td><td>${n.date}</td></tr>`}).join("");return`<table class="wp-list-table widefat fixed striped table-view-list datas amapi-datatable"><caption>${t.title}</caption><thead>${a}</thead><tbody>${s}</tbody></table>`};
